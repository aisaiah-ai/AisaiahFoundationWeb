Context: After enabling light mode, the header’s liquid/glass effect disappeared and menu contrast is inconsistent.
Goal: Bring back the gooey/liquid header (blurred glass with floating blobs), keep it visible in both themes, and make the nav perfectly readable.

Required changes
  1.  Create/extend theme tokens (keep your current ones). Add:

:root {
  --hdr-height: 64px;
  --glass-blur: 14px;
  --glass-radius: 16px;
  --glass-border: 1px;
  --glass-tint-dark: rgba(12,15,20,.55);
  --glass-tint-light: rgba(255,255,255,.65);
  --gooey-opacity-dark: .28;
  --gooey-opacity-light: .18;
  --sep-shadow-dark: 0 8px 30px rgba(0,0,0,.25);
  --sep-shadow-light: 0 8px 24px rgba(2,6,23,.08);
}
[data-theme="dark"] {
  --glass-tint: var(--glass-tint-dark);
  --gooey-opacity: var(--gooey-opacity-dark);
  --hdr-shadow: var(--sep-shadow-dark);
}
[data-theme="light"] {
  --glass-tint: var(--glass-tint-light);
  --gooey-opacity: var(--gooey-opacity-light);
  --hdr-shadow: var(--sep-shadow-light);
}


  2.  Header markup (wrap your existing nav inside and add the SVG layer):

<header class="liquid-header">
  <!-- Liquid SVG layer (behind) -->
  <svg class="liquid-bg" viewBox="0 0 1200 120" aria-hidden="true">
    <defs>
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"/>
        <feColorMatrix in="blur" mode="matrix"
          values="1 0 0 0 0
                  0 1 0 0 0
                  0 0 1 0 0
                  0 0 0 20 -10" result="goo"/>
        <feBlend in="SourceGraphic" in2="goo"/>
      </filter>
    </defs>
    <!-- soft blobs; keep simple for perf -->
    <g filter="url(#goo)" opacity="0.9">
      <circle cx="90"   cy="60" r="32" class="blob" />
      <circle cx="170"  cy="34" r="18" class="blob" />
      <circle cx="260"  cy="70" r="26" class="blob" />
      <circle cx="340"  cy="44" r="20" class="blob" />
    </g>
  </svg>

  <!-- Glass bar (nav content goes here) -->
  <div class="glass-bar">
    <!-- your logo + links + donate + theme toggle -->
  </div>
</header>


  3.  Header CSS (layering is the reason the effect disappeared—bring back the stack and tints):

.liquid-header {
  position: sticky; top: 0; z-index: 50; height: var(--hdr-height);
  isolation: isolate;                           /* separate stacking context */
}

/* Liquid background (behind the glass) */
.liquid-bg {
  position: absolute; inset: 0;
  opacity: var(--gooey-opacity);
  pointer-events: none;
}
/* Blob color follows theme text/accent softly */
.blob { fill: color-mix(in oklab, var(--accent) 35%, transparent); }

/* Glass bar that sits ABOVE blobs but BELOW text using ::before tint */
.glass-bar {
  position: relative;
  height: 100%;
  margin: 8px auto;
  max-width: 1100px;
  display: flex; align-items: center; justify-content: space-between;
  border-radius: var(--glass-radius);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: var(--glass-border) solid var(--border);
  box-shadow: var(--hdr-shadow);
  overflow: hidden;
}
/* The tint layer that restores contrast on both themes */
.glass-bar::before {
  content:"";
  position:absolute; inset:0;
  background: var(--glass-tint);
  z-index: 0;             /* stays below nav content */
}

/* Ensure nav content sits above tint */
.glass-bar > * { position: relative; z-index: 1; }

/* Links */
.nav-link {
  position: relative; padding: .5rem .6rem; font-weight: 600;
  color: var(--text-primary);
}
.nav-link:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
.nav-link::after {
  content:""; position:absolute; left:50%; bottom:-6px; height:2px; width:0;
  background: var(--accent); border-radius: 9999px; transition: width .2s, left .2s;
}
.nav-link:hover::after, .nav-link[aria-current="page"]::after { left:0; width:100%; }

/* Donate pill (kept high-contrast) */
.btn-donate {
  border-radius: 9999px; padding: .55rem .9rem; font-weight: 700;
  background: var(--accent); color: var(--btn-text-on-accent);
}

/* Mobile panel inherits glass */
.mobile-panel {
  margin: 6px 8px 0; padding: 8px;
  border-radius: var(--glass-radius);
  border: var(--glass-border) solid var(--border);
  backdrop-filter: blur(var(--glass-blur)); -webkit-backdrop-filter: blur(var(--glass-blur));
  background: var(--glass-tint);
  box-shadow: var(--hdr-shadow);
}


  4.  Fix z-index / overflow conflicts
If any parent of the header has overflow:hidden or creates a new stacking context (e.g., transform, filter, position: sticky with overflow), remove it or ensure the header uses isolation:isolate (already added) so the SVG and blur render. This is commonly why the “liquid” vanished.
  5.  Light-mode contrast
Make sure the tokens drive colors (no hardcoded dark grays in header):
  • Nav text uses var(--text-primary).
  • Borders use var(--border).
  • The tint overlay uses --glass-tint (switches per theme).
  • SVG blobs fill via color-mix so they’re faint in light mode.
  6.  Minimal JS (unchanged)
Keep your existing theme toggle; no change needed for the effect. If the mobile menu is portal/absolutely positioned, mount/unmount it (don’t hide under the glass bar).

Acceptance tests
  • The header shows a subtle gooey blob movement/shape behind a blurred, tinted glass bar in both themes.
  • All nav links pass WCAG AA in light mode; hover underline is clearly visible.
  • The bar stays sticky; a soft separation shadow/border is visible against the hero.
  • iOS Safari renders the blur (backdrop-filter active) and SVG is visible (no parent overflow clipping).
  • Mobile panel opens with the same glass style.

⸻

Optional micro-polish
  • Nudge the hero’s top gradient back 10–15% opacity in light mode so the glass bar remains distinct.
  • Reduce blob count to 3–4 with larger radii for better performance.
